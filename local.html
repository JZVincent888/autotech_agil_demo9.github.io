<!DOCTYPE html>
<html lang="en">
<head>

<link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro" rel="stylesheet">
<link rel="stylesheet" href="static/css/bulma.min.css">
<link rel="stylesheet" href="static/css/fontawesome.all.min.css">
<link rel="stylesheet" href="static/css/index.css">

<script src="static/js/index.js"></script>
<style>

/* Adjust spacing between title and images */
.hero-body {
  padding-bottom: 0.5px; /* Reduced bottom padding for the title section */
}

.logo-rows {
  margin-top: 0.5px; /* Reduced spacing between the title and the first image row */
}

.logo-row img {
  margin: 1px; /* Optional: Adjust spacing between images */
}

video {
  border: 2px solid black;
  width: 80%;
  height: auto;
  display: block;
  margin: 20px auto;
}
</style>
</head>

<body>

<section class="hero">
  <div class="hero-body">
    <div class="container is-max-desktop">
      <div class="columns is-centered">
        <div class="column has-text-centered">
            <h1 class="title is-4 publication-title" style="font-size: 2.5rem; font-weight: bold;">AUTOtech.agil Demonstration 9: Test Fields</h1>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="hero is-small">
  <div class="hero-body">
    <div class="container">

      <div class="logo-rows" style="margin-top: 20px;">
        <div class="logo-row" style="display: flex; justify-content: center; align-items: center; gap: 10px; margin-bottom: 20px;">
          <img src="static/images/autotech_agil.png" alt="Logo 1" style="width: 210px; height: 55px;"> 
          <img src="static/images/BMBF.png" alt="Logo 2" style="width: 260px; height: 130px;">
        </div>

        <!-- <div class="mpty-rowe" style="height: 20px;"></div> -->

        <div class="logo-row" style="display: flex; justify-content: center; align-items: center;">
          <img src="static/images/tum.png" alt="Logo 3" style="width: 500px; height: 50px;">
          <img src="static/images/ulm.png" alt="Logo 4" style="width: 300px; height: 80px;">
          <img src="static/images/rwth.png" alt="Logo 5" style="width: 300px; height: 50px;">
        </div>
      </div>

      <div class="empty-row" style="height: 20px;"></div>

      <!-- Buttons to select video -->
      <div class="buttons has-text-centered" style="display: flex; justify-content: center; gap: 10px;">
        <button id="btn-tum-air" class="button is-primary">TUM-AIR</button>
        <button id="btn-uulm-mrm" class="button is-link">UULM-MRM</button>
        <button id="btn-rwth-ika" class="button is-success">RWTH-IKA</button>
      </div>

      <!-- Video Element for Screen Stream -->
      <video id="screenVideo" autoplay muted></video>

    </div>
  </div>
</section>

<script>
const videoElement = document.getElementById('screenVideo');
const tumAirButton = document.getElementById('btn-tum-air');

// Function to start screen capture
async function startScreenCapture() {
  try {
    const screenStream = await navigator.mediaDevices.getDisplayMedia({
      video: { cursor: "always" },
      audio: false
    });

    videoElement.srcObject = screenStream;

    // Programmatically mute the video and play
    videoElement.muted = true;
    await videoElement.play();

    // Alert when the stream ends
    screenStream.getVideoTracks()[0].addEventListener('ended', () => {
      alert('Screen capture has ended');
    });
  } catch (err) {
    console.error("Error capturing screen:", err);
    alert("Failed to capture screen: " + err.message);
  }
}

// Attach click event to the TUM-AIR button
tumAirButton.addEventListener('click', startScreenCapture);
</script>

</body>
</html>